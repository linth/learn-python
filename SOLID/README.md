# SOLID 原則總結


## **1. 單一職責 (Single Responsibility Principle, SRP)**
    - 一個類別只能有一個改變的原因
    - 實現高內聚，將不相關的程式碼移除，使得整體程式碼中的每個部分都與自己實作的功能相關。

### 優點
    - 降低類別複雜度。
    - 提高可讀性及維護性。
    - 變更引起的風險降低。

### 缺點
    - 功能類別的歸類困難，依照不同情境有不同的劃分方法。



---
## **2. 開放封閉 (Open-Close Principle, OCP)**
    - 軟體實體像是類別、模組和函式，應該只對延展開放，但對修改關閉。
    - 簡單來說，就是當系統需要被擴充時，應該藉由新增新的程式碼來擴充新功能，而非修改原本的程式碼來擴充新功能。
    - 擴充新功能應藉由新增新的程式碼，而非修改原本的程式碼

### 優點
    - 降低耦合。
    - 增加擴展性。
    - 易於維護。

### 缺點
    - 會產生許多的 class。


---
## **3. 里式替換 (Liskov Substitution Principle, LSP)**
    - LSP的定義為子類別可以擴充套件父類別的功能，但不改變父類別原有的功能，其中還包含以下4層含義。
    - 子類別必須完全實現父類別的方法
    - 子類別可以有自己的特性
    - 重載(Overload)或者實現父類別的方法時輸入參數可以被放大
    - 覆蓋或者實現父類別的方法時輸出結果可以被縮小

### 優點
    - 提高程式碼的重用性。
    - 提高類別的擴充性。

### 缺點
    - 因為繼承關係，耦合性增高(修改父類別常數時需要思考是否會影響到其他繼承的子類別)。
    - 降低程式碼靈活性(必須實作父類別所有方法)
    

    
---
## **4. 介面隔離 (Interface Segregation Principle, ISP)**
    - 客戶不應該被強迫依賴他們不使用的方法
    - 使用介面隔離，可以隔離區分不同的實作需求。

SRP與ISP的差異:
    - SRP的目的在於一個模組只能有承擔一個責任。
    - ISP的目的在於不強迫實作的類別實作不需要的function。

SRP與ISP設計角度差異:
    - SRP注重的是設計層面，如何劃分功能的歸類，讓程式方便維護及擴充。
    - ISP則是注重在客戶端層面，認為只需要呈現客戶端所需要的功能即可。


### 優點
    - 不讓interface包過多的功能。
    - 不應該強迫實作沒有用到的方法。
    - 實現class間的低耦合。

---
## **5. 依賴反轉 (Dependency Inversion Principle, DIP)**
    - High-level modules should not depend on low-level modules. Both should depend on abstractions. (高層模組不應該依賴低層模組，兩者皆應依賴於抽象。)
    - Abstractions should not depend on details. Details should depend on abstractions. (抽象不應該依賴細節，細節應該依賴於抽象。)
    - 高層低層是相對關係，其實也就是呼叫者與被呼叫者。而細節指的是具體的實作，相較於抽象的穩定，細節的變化較多。


### 優點
    - 减少class間的耦合性，提高系统的穩定性
    - 降低開發時的風險
    - 提高系統可讀及維護性


---
## **6. 合成/聚合複用原則 (Composite/Aggregate Reuse Principle)**
    - 盡量使用組合(contains-a)/聚合(has-a)方式來代替繼承(is-a)來達到重複使用的目的。
    - 主要目的在於當要重複使用套件時，應該先考慮使用組合/聚合的方式，其次才是繼承。
    - 而如果要使用繼承的話，則須符合里氏替換原則(LSP)

### 合成/聚合差異性:
    - 聚合：班級與學生 (有點類似關係概念)
    - 合成：人與器官 (有點類似集合概念)


### 合成/聚合跟繼承差異性:
    - 封裝性
        - 繼承時父類別的實作細節會暴露給子類別，所以繼承會破壞類別的封裝。而由於父類別對子類別是透明的，所以繼承又稱做白箱複用。
        - 合成/聚合時使用的類別並不知道原始類別的實作細節，所以維持了類別的封裝性，又稱做黑箱複用。
    - 耦合度
        - 繼承時父類別與子類別的耦合度高。若父類別做任何更動都會影響到子類別，降低了類別的擴充及維護。
        - 合成/聚合時新舊類別的耦合度及依賴程度低，新類別只能透過複用類別的接口取得內容。
    - 靈活性
        - 繼承限制了整體的靈活性。由於從父類別繼承下來的實作是靜態的，不可能在執行時發生變化。
        - 合成/聚合的靈活性較高。合成/聚合執行時，新類別可以自由的引用與組合類別相同的對象。


---
## **迪米特法則 (Law of Demeter)**
    - 各單元對其他單元所知應當有限：只瞭解與目前單元最相關之單元。
    - 就是一個類別，對自己需要呼叫或耦合的類別不需要知道的太多，只需要知道該類別提供的public方法，不需要知道內部的實作。

4種含意:
    - 只和朋友交流 Only talk to your immediate friends
    - 朋友間也應該有距離
        - 是否還可以再减少public方法和屬性
        - 是否可以修改為private、package、protected等權限
        - 是否可以加上final關鍵字。
    - 是自己的就是自己的
        - 一個方法，放在本類別沒問題，但放在其他類別也不會出錯。
    - 謹慎使用Serializable
        - 若使用不當，未來修改屬性，序列化時會拋異常NotSerializableException。


https://ithelp.ithome.com.tw/articles/10237285

---
## Reference:
    - https://ithelp.ithome.com.tw/articles/10235629