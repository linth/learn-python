# 程式 (process) / 執行續 (thread) / 協程 (coroutine)


## Process
電腦中每個軟體的啟動就代表一個程式，就是把寫的程式載入到作業系統中來執行預定好的任務。

## Thread
執行緒是程式的執行例項，是一個程式執行的最小單元，每個程式裡的任務會有執行緒去具體執行。

舉例：
請個工人來蓋房子，於是他去外面請了一個工人A，這個工人A要做搬磚和搬木頭的工作，此時這個工人A就是一個程式，老王還要求他這兩個任務不能差距太大，要同步進行，所以這個工人A只能搬一趟轉頭，搬一趟木頭，這樣的操作就是單執行緒的併發操作。

```
# 任務：蓋房子 (搬木頭、搬磚頭)
建立一個工人A (thread)
A執行任務： 搬木頭 -> 搬磚頭 -> 搬木頭、搬磚頭 -> 搬木頭、搬磚頭
```

上述規劃跟執行太慢也資源消耗太大，工人A要求加薪，所以老王就只能多找一位工人B

```
# 任務：蓋房子 (搬木頭、搬磚頭)
建立一個工人A (thread)
建立一個工人B (thread)
A執行任務： 搬木頭 -> 搬木頭 -> 搬木頭 -> 搬木頭
B執行任務： 搬磚頭 -> 搬磚頭 -> 搬磚頭 -> 搬磚頭
```

考量執行任務時，環境是屬於單核心還是雙核心：
- 單核心:
    - 無法執行併行操作
    - 只能執行併發 (A執行任務: 搬木頭 -> B執行任務： 搬磚頭 -> A執行任務: 搬木頭)

- 雙核心:
    - 可以執行併行操作

## Coroutine
Process 和 thread 任務的切換是作業系統來控制，切換則會產生資源消耗 (content-switch)。
協程我們可以理解為輕量級的執行緒，在執行過程中不會由作業系統直接操作，而是由編譯器決定，比如協程A說我當前的任務還得一段時間執行完，我可以讓出當前佔用的資源了，協程A就會通知排程器，由排程器來分配下一個協程執行。
可以減少同步鎖等問題。



## Reference
    - [執行緒，程式，協程， 併發，並行，同步，非同步概念解析](https://iter01.com/499199.html)